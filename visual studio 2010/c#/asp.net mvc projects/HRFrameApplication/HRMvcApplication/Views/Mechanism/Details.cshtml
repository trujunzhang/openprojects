@model HRMvcApplication.Models.MechanismDetailModel


<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="Stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"> </script>

<style type="text/css">
    #contactlist {
        height: 100%;
        width: 100%;
    }
</style>


<script type="text/javascript">
    $(function() {
        $("#NoteDialog").dialog({
            autoOpen: false,
            width: 700,
            height: 430,
            modal: true,
            title: "添加联系人",
            beforeclose: function(event, ui) {
                FreshDiv();
                //$("form").submit();
                // $("form").load("/Mechanism/MechanismContract");
            },
            buttons: {
                Cancel: function() {
                    $(this).dialog("close");
                }
            }
        });
        $("#AddLink").click(function() {
            //var id = $("#SelectedMechanismid").val();
            //alert("add link");
//                .load("/Mechanism/AppendPersonInCharge?id=" + id ,           
            $("#NoteDialog").html("")
                .dialog("option", "closeOnEscape", false)
                .load("http://www.baidu.com",
                    function() { $("#NoteDialog").dialog("open"); });
        });
    });

    function FreshDiv() {
        $.ajax({
            url: "/Mechanism/ContractViewer",
            type: "POST",
            success: function(data) {
                $("#divcontract").empty();
                $("#divcontract").html(data);
            }
        });
    }
</script>





<div id="modelviewer" style="float: left; height: 100%; width: 50%;">
    <div style="height: 100%; width: 200px;">
        <p>wanghao</p>
    </div>    
</div>


@using (Html.BeginForm())
{
    <fieldset >
        <legend>管理联系人</legend>
        @Html.HiddenFor(model => model.SelectedMechanismid)
        <div id="divcontract" style="height: 200px; width: 100%;">
            @Html.Partial("ContractViewer")
        </div>
        <p>
            <span>
                <input type="button" id="AddLink"  style="width: 100%;" value="添加" />                                                
            </span>   
            <span >
                <input type="submit" name="remove" id="remove" style="width: 100%;" value="删除" />                                                
            </span>   
            <span >
                <input type="submit" name="up" id="up" style="width: 100%;" value="上移" />
            </span>   
            <span >
                <input type="submit" name="down" id="down" style="width: 100%;" value="下移" />                                                                    
            </span>   
        </p>
    </fieldset>
}
	
<div id ="NoteDialog"/>